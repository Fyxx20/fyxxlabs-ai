(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94588,e=>{"use strict";var a=e.i(863108),i=e.i(352812);function t({validTabs:e,defaultTab:t,paramName:s="tab",useReplace:n=!0}){let r=(0,i.useSearchParams)(),l=(0,i.useRouter)(),o=(0,i.usePathname)(),c=(0,a.useRef)(e),d=(0,a.useRef)(t),h=(0,a.useRef)(!1);c.current=e,d.current=t;let u=(0,a.useCallback)(e=>null!==e&&c.current.includes(e),[]),p=(0,a.useCallback)(()=>{let e=r.get(s);return u(e)?e:d.current},[r,s,u]),[g,m]=(0,a.useState)(()=>p());(0,a.useEffect)(()=>{if(h.current){h.current=!1;return}m(p())},[p]);let f=(0,a.useCallback)(e=>{let a=new URLSearchParams(r.toString());return e===d.current?a.delete(s):a.set(s,e),a.toString()?`${o}?${a.toString()}`:o},[r,o,s]),x=(0,a.useCallback)(e=>{if(!c.current.includes(e))return void console.warn(`Invalid tab value: ${e}`);m(e),h.current=!0;let a=f(e);n?l.replace(a,{scroll:!1}):l.push(a,{scroll:!1})},[f,n,l]),b=(0,a.useCallback)(e=>g===e,[g]);return{activeTab:g,setTab:x,isActive:b,getTabUrl:f}}e.s(["SETTINGS_TABS",0,["profile","password","subscription","tarification","shopify","licences"],"SETTINGS_URLS",0,{profile:"/dashboard/settings",password:"/dashboard/settings?tab=password",subscription:"/dashboard/settings?tab=subscription",tarification:"/dashboard/settings?tab=tarification",shopify:"/dashboard/settings?tab=shopify",licences:"/dashboard/settings?tab=licences"},"useUrlTabs",()=>t])},185595,e=>{"use strict";e.i(503477);var a=e.i(950083),i=e.i(863108),t=e.i(896478);let s=(0,i.createContext)({isReady:!1,isLoading:!1,hasStripeId:!1,showCancelFlow:()=>{},checkPause:()=>{},checkFailedPayment:()=>{}});function n(){return(0,i.useContext)(s)}function r({children:e}){let[n,r]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),{config:c,isReady:d,isLoading:h,fetchConfig:u,showCancelFlow:p,checkPause:g,checkFailedPayment:m}=function(){let[e,a]=(0,i.useState)(null),[t,s]=(0,i.useState)(!1),[n,r]=(0,i.useState)(null),[l,o]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>!!window.churnkey?.created&&(o(!0),!0);if(e())return;let a=setInterval(()=>{e()&&clearInterval(a)},100),i=setTimeout(()=>{clearInterval(a)},1e4);return()=>{clearInterval(a),clearTimeout(i)}},[]);let c=(0,i.useCallback)(async()=>{s(!0),r(null);try{let e=await fetch("/api/churnkey/hash"),i=await e.json();if(i.success)return console.log("[Churnkey Hook] Config loaded successfully"),a(i),i;if(!1===i.hasStripeId||400===e.status)return console.log("[Churnkey Hook] User has no Stripe ID (trial user) - Churnkey disabled"),null;if(503===e.status)return console.log("[Churnkey Hook] Churnkey not configured:",i.reason||i.error),null;throw Error(i.error||"Failed to fetch Churnkey config")}catch(e){return r(e instanceof Error?e.message:"Failed to fetch Churnkey config"),console.error("[Churnkey Hook] Error fetching config:",e),null}finally{s(!1)}},[]),d=(0,i.useCallback)(()=>{l&&e&&window.churnkey&&"function"==typeof window.churnkey.init?window.churnkey.init("show",{customerId:e.customerId,authHash:e.authHash,appId:e.appId,mode:e.mode,provider:"stripe",record:!0,customerAttributes:{language:e.lang},i18n:{lang:e.lang},handleCancel:async(e,a)=>{try{let e=await fetch("/api/billing/subscription",{method:"DELETE"});if(!e.ok){let a=await e.json();throw Error(a.error||"Failed to cancel subscription")}window.location.reload()}catch(e){throw console.error("[Churnkey] Cancel error:",e),{message:"Failed to cancel subscription. Please contact support."}}}}):console.warn("[Churnkey] Not ready or no config")},[l,e]),h=(0,i.useCallback)(()=>{l&&e&&window.churnkey&&"function"==typeof window.churnkey.check&&window.churnkey.check("pause",{customerId:e.customerId,authHash:e.authHash,appId:e.appId,mode:e.mode,provider:"stripe",softWall:!1,forceCheck:!1,customerAttributes:{language:e.lang},i18n:{lang:e.lang},onError:(e,a)=>{console.log(`[Churnkey] Pause check error - ${a}:`,e)}})},[l,e]),u=(0,i.useCallback)(()=>{l&&e&&window.churnkey&&"function"==typeof window.churnkey.check&&(e.hasActiveSubscription||e.isOnTrial||window.churnkey.check("failed-payment",{customerId:e.customerId,authHash:e.authHash,appId:e.appId,mode:e.mode,provider:"stripe",softWall:!0,gracePeriodDays:0,forceCheck:!0,customerAttributes:{language:e.lang},i18n:{lang:e.lang},onError:(e,a)=>{console.log(`[Churnkey] Failed payment check error - ${a}:`,e)},onUpdatePaymentInformation:async e=>{console.log("[Churnkey] Payment information updated:",e);try{await fetch("/api/billing/subscription",{method:"PATCH"})}catch(e){console.error("[Churnkey] Error updating subscription:",e)}}}))},[l,e]);return{config:e,isLoading:t,error:n,isReady:l,showCancelFlow:d,checkPause:h,checkFailedPayment:u,fetchConfig:c}}();(0,i.useEffect)(()=>{u()},[u]),(0,i.useEffect)(()=>{d&&c&&!l&&(o(!0),g(),c.hasActiveSubscription||c.isOnTrial||setTimeout(()=>{m()},500))},[d,c,l,g,m]);let f=(0,i.useCallback)(()=>{r(!0)},[]);return(0,a.jsxs)(s.Provider,{value:{isReady:d&&n,isLoading:h,hasStripeId:!!c?.customerId,showCancelFlow:p,checkPause:g,checkFailedPayment:m},children:[(0,a.jsx)(t.default,{id:"churnkey-script",strategy:"lazyOnload",src:"https://assets.churnkey.co/js/app.js?appId=3t28ew8c6",onLoad:f,onError:e=>{console.error("[Churnkey] Script failed to load:",e)}}),(0,a.jsx)(t.default,{id:"churnkey-init",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:`
            !function() {
              if (!window.churnkey || !window.churnkey.created) {
                window.churnkey = { created: true };
              }
            }();
          `}}),e]})}e.s(["ChurnkeyProvider",()=>r,"useChurnkeyContext",()=>n],185595)},275726,e=>{"use strict";let a="sidebarCollapsed";e.s(["SIDEBAR_COLLAPSED_PREFERENCE_KEY",0,a,"persistSidebarCollapsedPreference",0,e=>{let i;try{localStorage.setItem(a,String(e))}catch(e){console.error("Failed to persist sidebar collapsed preference:",e)}document.cookie=(i=`${a}=${String(e)}; path=/; max-age=31536000; SameSite=Lax`,"https:"===window.location.protocol?`${i}; secure`:i)}])},345453,911646,80555,e=>{"use strict";var a=e.i(950083),i=e.i(838689),t=e.i(926812),s=e.i(352812),n=e.i(975157),r=e.i(863108),l=e.i(25629),o=e.i(234746),c=e.i(94588),d=e.i(659465),h=e.i(298516),u=e.i(868711);let p=u.locales.map(e=>({code:e,label:e.toUpperCase(),flag:`/flags/${u.localeFlags[e]}.svg`}));function g({onNavigate:e,isCollapsed:u=!1,onToggleCollapse:g}){let m=(0,s.usePathname)(),{data:f,status:x}=(0,l.useSession)(),b="loading"===x,[v,y]=(0,r.useState)(!1),[j,k]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),C=(0,r.useRef)(null),S=(0,r.useRef)(null),{locale:z,changeLocale:_}=(0,h.useChangeLocale)(),E=(0,h.useCommonTranslations)(),{stats:T,loading:I}=(0,o.useStats)(),{track:F,trackOpenTopShops:P,trackOpenProducts:R,trackOpenSettings:L,trackOpenSubscription:M,trackOpenStoreTracking:O,trackOpenSuppliers:A,trackOpenCourses:B,trackOpenAIStore:U,trackLogout:H}=(0,d.useMixpanel)(),D=(0,r.useCallback)((a,i)=>{F(a),i?.(),e?.()},[F,e]);(0,r.useEffect)(()=>{let e=f?.user?.createdAt;if(f?.user?.utmSource,e){let a=new Date(e);N(Math.max(0,Math.ceil((168-(new Date().getTime()-a.getTime())/36e5)/24)))}},[f]);let $=T?.plan?.isOnTrial||T?.plan?.identifier==="trial",W=T?.plan?.isExpired||T?.plan?.identifier==="expired",q=T?.plan?.trialDaysRemaining??0,G=$||W,K=T?.shopify?.isConnectedViaApp||!1,Y=f?.user?.isMarcusUser??!1,V=f?.user?.shopifySetupCompleted??!1,J=f?.user?.generateStoresCount??0;(0,r.useEffect)(()=>{console.log("[Sidebar] Stats loaded:",{hasStats:!!T,shopify:T?.shopify,isConnectedViaApp:K,connectionType:T?.shopify?.connectionType})},[T,K]);let Q=(()=>{let e=f?.user?.createdAt,a=T?.plan?.identifier?.toLowerCase()||"";if(e&&new Date(e)>=new Date("2025-11-25"))return!1;return!($||["trial","free","starter","basic","basic-quarterly","basic-year","starter-quarterly","starter-year"].some(e=>a.includes(e)))})(),X=p.find(e=>e.code===z)||p[1];(0,r.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&y(!1),S.current&&!S.current.contains(e.target)&&k(!1)},a=()=>{if(!v)return;let e=C.current?.querySelector(".dropdown-menu"),a=C.current?.querySelector(".profile-trigger-btn");if(e&&a){let i=a.getBoundingClientRect();window.innerWidth<=991?(e.style.position="fixed",e.style.bottom=`${window.innerHeight-i.bottom}px`,e.style.left=`${i.right+8}px`,e.style.right="auto",e.style.top="auto",e.style.width="250px",e.style.maxWidth="250px",e.style.zIndex="2147483647",e.style.overflow="visible"):(e.style.position="fixed",e.style.bottom=`${window.innerHeight-i.bottom}px`,e.style.left=`${i.right+8}px`,e.style.right="auto",e.style.top="auto",e.style.width="250px",e.style.zIndex="2147483647"),e.style.isolation="isolate"}};return(v||j)&&(document.addEventListener("mousedown",e),v&&(a(),window.addEventListener("resize",a))),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("resize",a)}},[v,j]);let Z=async e=>{_(e),k(!1),F("Language_Changed",{from:z,to:e});try{await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lang:e})})}catch(e){console.error("Failed to update user language setting:",e)}};return(0,a.jsxs)("div",{className:"h-100 w-100 d-flex flex-column flex-shrink-0 position-relative",style:{zIndex:1,height:"100vh",overflow:"visible"},children:[(0,a.jsx)("div",{className:"d-flex my-2 ps-3 pe-3 pb-2 pt-4 align-items-center justify-content-between",children:u?(0,a.jsx)("div",{className:"d-flex align-items-center justify-content-center w-100",children:(0,a.jsx)("button",{className:"sidebar-expand-btn",type:"button",onClick:g,title:E("sidebar.expandSidebar"),style:{background:"none",border:"none",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("i",{className:"ri-sidebar-unfold-line",style:{fontSize:"24px",color:"#fff"}})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)("div",{className:"sidebar-logo",children:(0,a.jsx)(i.default,{href:"/dashboard",onClick:e,children:(0,a.jsx)(t.default,{src:"/img/branding/text-logo-new-3-lp.svg",width:58,height:16,alt:"Copyfy",unoptimized:!0})})}),(0,a.jsxs)("div",{className:"dropdown language-selector-dropdown",ref:S,children:[(0,a.jsxs)("button",{className:(0,n.cn)("btn language-selector-btn d-flex align-items-center gap-1",j&&"active"),type:"button","aria-expanded":j,onClick:()=>k(!j),style:{padding:"4px 8px",fontSize:"11px"},children:[(0,a.jsx)(t.default,{src:X.flag,alt:X.label,width:16,height:16,style:{width:16,height:16,objectFit:"cover",borderRadius:"50%"},unoptimized:!0}),(0,a.jsx)("span",{className:"text-white fw-500",children:X.label}),(0,a.jsx)("i",{className:(0,n.cn)("ri-arrow-down-s-line text-white",j&&"rotate-180"),style:{transition:"transform 0.2s ease",fontSize:"12px"}})]}),j&&(0,a.jsx)("ul",{className:"dropdown-menu show language-dropdown-menu",children:p.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:(0,n.cn)("dropdown-item d-flex align-items-center gap-2",z===e.code&&"active"),onClick:()=>Z(e.code),children:[(0,a.jsx)(t.default,{src:e.flag,alt:e.label,width:18,height:18,style:{width:18,height:18,objectFit:"cover",borderRadius:"50%"},unoptimized:!0}),(0,a.jsx)("span",{children:e.label})]})},e.code))})]})]}),(0,a.jsx)("button",{className:"sidebar-toggle-btn",type:"button",onClick:g,title:E("sidebar.collapseSidebar"),style:{background:"none",border:"none",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("i",{className:"ri-sidebar-fold-line",style:{fontSize:"22px",color:"#ffffff"}})})]})}),(0,a.jsx)("div",{className:"px-3 side-menu-wrapper flex-1",style:{overflowY:"auto",flex:"1 1 auto"},children:(0,a.jsxs)("div",{className:"navbar dashboard-sidebar py-3 d-block mt-0",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("ul",{className:"navbar-nav",children:[(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard",className:(0,n.cn)("nav-link","/dashboard"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_Dashboard"),title:E("navigation.dashboard"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/home-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.dashboard"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})}),(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/products",className:(0,n.cn)("nav-link","/dashboard/products"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_Products",R),title:E("navigation.topProducts"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/tag-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.topProducts"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})}),(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/shops",className:(0,n.cn)("nav-link","/dashboard/shops"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_Top_Shops",P),title:E("navigation.topShops"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/shop-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.topShops"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})}),(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/ads",className:(0,n.cn)("nav-link","/dashboard/ads"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_TopAds"),title:E("navigation.topAds"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/announcement-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.topAds"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})})]})}),(0,a.jsxs)("div",{className:"mt-4",children:[!u&&(0,a.jsx)("p",{className:"menu-title mb-2",children:E("sections.tools")}),(0,a.jsxs)("ul",{className:"navbar-nav",children:[(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/analyze-shop",className:(0,n.cn)("nav-link","/dashboard/analyze-shop"===m||m?.startsWith("/dashboard/track/")?"active":"",W&&"nav-link-locked"),onClick:()=>D("Open_Store_Tracking",O),title:E("navigation.analyzeShop"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/analyze-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.analyzeShop"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})}),(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/ai-shop",className:(0,n.cn)("nav-link","/dashboard/ai-shop"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_AI_Store",U),title:E("navigation.aiShop"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)("i",{className:"fa-brands fa-shopify"})}),!u&&(0,a.jsxs)(a.Fragment,{children:[E("navigation.aiShop"),W?(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"}):(0,a.jsx)("span",{className:"badge bg-success-new ms-auto fw-500",children:E("badges.new")})]})]})}),!I&&!K&&Q&&(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/ai-creatives",className:(0,n.cn)("nav-link","/dashboard/ai-creatives"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_AI_Creatives"),title:E("navigation.aiCreatives"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)("i",{className:"ri-video-add-line fs-normal"})}),!u&&(0,a.jsxs)(a.Fragment,{children:[E("navigation.aiCreatives"),W?(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"}):(0,a.jsx)("span",{className:"badge bg-beta ms-auto fw-500",children:E("badges.beta")})]})]})}),!I&&!K&&(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/export",className:(0,n.cn)("nav-link","/dashboard/export"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_Export"),title:E("navigation.exportProduct"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/export-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.exportProduct"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})}),(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/search/products",className:(0,n.cn)("nav-link","/search/products"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_Search_Products"),title:E("navigation.findProduct"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/search-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.findProduct"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[!u&&(0,a.jsx)("p",{className:"menu-title mb-2",children:E("sections.resources")}),(0,a.jsxs)("ul",{className:"navbar-nav",children:[!I&&!K&&(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/suppliers",className:(0,n.cn)("nav-link","/dashboard/suppliers"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_Suppliers",A),title:E("navigation.suppliers"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/supplier-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.suppliers"),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})}),!I&&!K&&(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)(i.default,{href:"/dashboard/hire",className:(0,n.cn)("nav-link","/dashboard/hire"===m&&"active",W&&"nav-link-locked"),onClick:()=>D("Open_Hire"),title:E("navigation.hireCreator"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)("i",{className:"ri-lightbulb-flash-line fs-normal"})}),!u&&(E("navigation.hireCreator").length>25?E("navigation.hireCreator").substring(0,25)+"...":E("navigation.hireCreator")),!u&&W&&(0,a.jsx)("i",{className:"ri-lock-line ms-auto nav-lock-icon"})]})}),(0,a.jsx)("li",{className:"nav-items",children:(0,a.jsxs)("a",{href:"https://copyfy.crisp.help/fr/category/faq-1lvyeju/",className:"nav-link",target:"_blank",rel:"noopener noreferrer",onClick:()=>F("Open_FAQ"),title:E("navigation.faq"),children:[(0,a.jsx)("div",{className:"nav-image",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/faq.svg",alt:"",width:18,height:18,unoptimized:!0})}),!u&&E("navigation.faq")]})})]})]})]})}),(0,a.jsxs)("div",{className:"ps-3 pe-3 pb-3 pt-2",children:[!u&&(0,a.jsxs)(i.default,{href:"/dashboard/courses",className:"btn btn-primary w-icon justify-content-center",onClick:()=>D("Open_Courses",B),children:[(0,a.jsx)("span",{className:"btn-img",children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/play-icon.svg",alt:"",width:18,height:18,unoptimized:!0})}),(0,a.jsx)("span",{children:E("navigation.courses")})]}),u&&(0,a.jsx)(i.default,{href:"/dashboard/courses",className:"btn btn-primary w-100 d-flex align-items-center justify-content-center p-2",onClick:()=>D("Open_Courses",B),title:E("navigation.courses"),children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/play-icon.svg",alt:"",width:18,height:18,style:{width:18,height:18},unoptimized:!0})}),u&&G&&(0,a.jsxs)("div",{className:"trial-notice-collapsed mt-3 d-flex flex-column align-items-center gap-2",children:[(0,a.jsx)("div",{className:"trial-days-box d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.05)"},children:(0,a.jsx)("span",{className:"text-white fw-600",style:{fontSize:"20px"},children:W&&!$?"!":q>0?q:w??0})}),(0,a.jsx)(i.default,{href:"/dashboard/plans",className:"btn btn-upgrade-collapsed d-flex align-items-center justify-content-center",onClick:()=>{M("trial_notice"),e?.()},title:E("buttons.upgrade"),style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#3B82F6"},children:(0,a.jsx)(t.default,{src:"/img/icons/navbar/lightning-icon.svg",alt:"",width:16,height:20,style:{width:"16px",height:"20px"},unoptimized:!0})})]}),!u&&G&&(0,a.jsxs)("div",{className:"mt-3 trial-notice-wrapper",style:W&&!$?{backgroundColor:"#991b1b"}:void 0,children:[(0,a.jsx)("div",{className:"mb-3 text-white justify-content-center d-flex align-items-center",children:W&&!$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-center me-2 d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.2)",border:"2px solid #fca5a5"},children:(0,a.jsx)("i",{className:"ri-close-line",style:{fontSize:"18px",color:"#fca5a5"}})}),(0,a.jsx)("div",{className:"fs-xs",children:E("trial.expired")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"days-left text-center me-2",children:q>0?q:w??0}),(0,a.jsx)("div",{className:"fs-xs",children:E("trial.daysRemaining")})]})}),(0,a.jsxs)(i.default,{href:"/dashboard/plans",className:"btn btn-upgrade w-100 d-flex align-items-center justify-content-center",onClick:()=>{M("trial_notice"),e?.()},children:[(0,a.jsx)(t.default,{className:"me-1",src:"/img/icons/navbar/lightning-icon.svg",alt:"",width:11,height:15,style:{width:"11px",height:"15px"},unoptimized:!0}),(0,a.jsx)("span",{children:E("buttons.upgrade")})]})]}),!u&&!I&&T?.plan&&(0,a.jsxs)(i.default,{href:"/dashboard/plans",className:"plan-badge-link d-flex align-items-center gap-2 p-2 rounded-3 mt-3 text-decoration-none",onClick:()=>{M("plan_badge"),e?.()},style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsxs)("div",{className:"fw-600 d-flex align-items-center gap-2",style:{fontSize:"13px"},children:[(0,a.jsx)("span",{style:{color:W?"#ef4444":$||"free"===T.plan.identifier?"rgba(255, 255, 255, 0.6)":"#3B82F6"},children:T.plan.title||T.plan.identifier||"Plan"}),!W&&!$&&"free"!==T.plan.identifier&&(0,a.jsx)("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#3B82F6",boxShadow:"0 0 6px rgba(59, 130, 246, 0.5)"}})]}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.4)"},children:E("sidebar.currentPlan")})]}),(0,a.jsx)("i",{className:"ri-arrow-right-s-line",style:{color:"rgba(255, 255, 255, 0.3)",fontSize:"18px"}})]}),u&&!I&&T?.plan&&!G&&(0,a.jsx)(i.default,{href:"/dashboard/plans",className:"d-flex align-items-center justify-content-center mt-3",onClick:()=>{M("plan_badge"),e?.()},title:T.plan.title||T.plan.identifier||"Plan",style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,a.jsx)("span",{className:"fw-600",style:{fontSize:"11px",color:W?"#ef4444":$||"free"===T.plan.identifier?"rgba(255, 255, 255, 0.6)":"#3B82F6",textTransform:"uppercase",letterSpacing:"0.5px"},children:(T.plan.identifier||"Plan").substring(0,3)})}),(0,a.jsxs)("div",{className:"mt-3 position-relative",ref:C,children:[(0,a.jsxs)("button",{className:(0,n.cn)("profile-trigger-btn w-100 d-flex align-items-center gap-2 p-2 rounded-3",v&&"active"),type:"button",onClick:()=>y(!v),disabled:b,children:[(0,a.jsx)("div",{className:"profile-avatar position-relative",children:b?(0,a.jsx)("div",{className:"rounded-circle skeleton-pulse",style:{width:36,height:36,backgroundColor:"rgba(255,255,255,0.1)"}}):(0,a.jsx)(t.default,{className:"rounded-circle",src:f?.user?.image||`https://eu.ui-avatars.com/api/?name=${encodeURIComponent(f?.user?.name||"User")}&background=091C43&color=fff&bold=true&length=1&size=300&format=png`,alt:"Profile",width:36,height:36,style:{width:36,height:36,objectFit:"cover"}})}),!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-start flex-grow-1 overflow-hidden",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"skeleton-pulse rounded",style:{width:"100px",height:"14px",backgroundColor:"rgba(255,255,255,0.1)",marginBottom:"4px"}}),(0,a.jsx)("div",{className:"skeleton-pulse rounded",style:{width:"140px",height:"12px",backgroundColor:"rgba(255,255,255,0.1)"}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,a.jsx)("span",{className:"text-white fs-small fw-500 text-truncate",children:f?.user?.name||E("user.defaultName")}),(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"8",cy:"8",r:"8",fill:"#3B82F6"}),(0,a.jsx)("path",{d:"M5.5 8L7 9.5L10.5 6",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),(0,a.jsx)("span",{className:"text-truncate d-block",style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"11px"},children:f?.user?.email||""})]})}),(0,a.jsx)("i",{className:"ri-settings-4-line",style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"18px"}})]})]}),v&&(0,a.jsxs)("ul",{className:"dropdown-menu show profile-dropdown-menu","aria-labelledby":"profileDropdownMenu",children:[(0,a.jsx)("li",{children:I?(0,a.jsxs)("div",{className:"dropdown-item fs-small fw-500 w-status d-flex align-items-center",children:[(0,a.jsx)(t.default,{className:"dropdown-item-icon",src:"/img/branding/shopify-logo-min.png",alt:"Shopify",width:18,height:18}),(0,a.jsx)("span",{className:"skeleton-text",style:{display:"inline-block",width:"140px",height:"14px",backgroundColor:"#e5e7eb",borderRadius:"4px"}})]}):(0,a.jsxs)(i.default,{className:"dropdown-item fs-small fw-500 w-status",href:T?.shopify?.isConnected?c.SETTINGS_URLS.shopify:Y&&0===J&&!V?"/dashboard/create-shopify-account":"/dashboard/shopify-get-started",onClick:()=>y(!1),children:[(0,a.jsx)(t.default,{className:"dropdown-item-icon",src:"/img/branding/shopify-logo-min.png",alt:"Shopify",width:18,height:18}),T?.shopify?.isConnected?(0,a.jsxs)(a.Fragment,{children:[T.shopify.domain?.replace(".myshopify.com","").substring(0,25),(T.shopify.domain?.replace(".myshopify.com","").length??0)>25?"...":"",(0,a.jsx)("span",{className:"ms-2",style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#22c55e",display:"inline-block"}})]}):E("shopify.connectYour")]})}),(0,a.jsx)("li",{children:(0,a.jsx)("hr",{className:"dropdown-divider"})}),!K&&(0,a.jsx)("li",{children:(0,a.jsxs)(i.default,{className:"dropdown-item fs-small fw-500",href:"/dashboard/affiliate",onClick:()=>y(!1),children:[(0,a.jsx)(t.default,{className:"dropdown-item-icon",src:"/img/icons/navbar/affiliate-icon.svg",alt:"Affiliate",width:18,height:18,unoptimized:!0}),E("navigation.affiliate")]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(i.default,{className:"dropdown-item fs-small fw-500",href:"/dashboard/settings",onClick:()=>{L("profile_dropdown"),y(!1)},children:[(0,a.jsx)("i",{className:"ri-equalizer-line dropdown-item-icon",style:{fontSize:"16px",width:"20px"}}),E("navigation.settings")]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{className:"dropdown-item fs-small fw-500",href:"https://copyfy.crisp.help/fr/category/faq-1lvyeju/",target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(t.default,{className:"dropdown-item-icon",src:"/img/icons/navbar/help-icon.svg",alt:"Help",width:18,height:18,unoptimized:!0}),E("navigation.helpCenter")]})}),(0,a.jsx)("li",{children:(0,a.jsx)("hr",{className:"dropdown-divider"})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{className:"dropdown-item fs-small fw-500",href:"#",onClick:e=>{e.preventDefault(),H(),(0,l.signOut)({callbackUrl:"/login"})},children:[(0,a.jsx)(t.default,{className:"dropdown-item-icon",src:"/img/icons/navbar/exit-icon.svg",alt:"Logout",width:18,height:18,unoptimized:!0}),E("navigation.logout")]})})]})]})]})]})}function m(){let{data:e,status:a,update:i}=(0,l.useSession)();return{user:e?.user,isLoading:"loading"===a,isAuthenticated:"authenticated"===a,isOnTrial:e?.user?.isOnTrial??!1,trialDaysRemaining:e?.user?.trialDaysRemaining,activePlan:e?.user?.activePlan,balances:e?.user?.balances,refreshSession:i}}function f({type:e,showExtendTrial:i=!1,onExtendTrial:t}){let n=(0,s.useRouter)(),l=(0,s.usePathname)(),[o,c]=(0,r.useState)(!0),{trackUpgradePromptShown:u,trackUpgradeCTAClicked:p}=(0,d.useMixpanel)(),g=(0,h.useCommonTranslations)();(0,r.useEffect)(()=>{u({prompt_type:e,page_name:l||"unknown"})},[e,l,u]);let m=["/dashboard/plans","/dashboard/settings"].some(e=>l?.startsWith(e));if(!o||m)return null;let f=(()=>{switch(e){case"trial_ended":return{title:g("subscriptionModal.trialEnded.title"),description:g("subscriptionModal.trialEnded.description"),buttonText:g("subscriptionModal.trialEnded.button"),buttonUrl:"/dashboard/plans?triggered_from=Trial_ended"};case"subscription_ended":return{title:g("subscriptionModal.subscriptionEnded.title"),description:g("subscriptionModal.subscriptionEnded.description"),buttonText:g("subscriptionModal.subscriptionEnded.button"),buttonUrl:"/dashboard/plans?triggered_from=Subscription_ended"};case"payment_failed":return{title:g("subscriptionModal.paymentFailed.title"),description:g("subscriptionModal.paymentFailed.description"),buttonText:g("subscriptionModal.paymentFailed.button"),buttonUrl:"/dashboard/plans?triggered_from=Failed_Payment"};default:return{title:g("subscriptionModal.default.title"),description:g("subscriptionModal.default.description"),buttonText:g("subscriptionModal.default.button"),buttonUrl:"/dashboard/plans"}}})();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:20},children:(0,a.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:16,maxWidth:420,width:"100%",padding:32,textAlign:"center",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",animation:"modalFadeIn 0.3s ease-out"},children:[(0,a.jsx)("div",{style:{width:80,height:80,borderRadius:"50%",backgroundColor:"#FEE2E2",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"#DC2626",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,a.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),(0,a.jsx)("h2",{style:{fontSize:22,fontWeight:600,color:"#111827",marginBottom:12,lineHeight:1.3},children:f.title}),(0,a.jsx)("p",{style:{fontSize:15,color:"#6B7280",marginBottom:28,lineHeight:1.6},children:f.description}),(0,a.jsxs)("button",{onClick:()=>{var a;p({prompt_type:e,destination_url:a=f.buttonUrl}),n.push(a)},style:{width:"100%",padding:"14px 24px",backgroundColor:"#3B82F6",color:"#fff",border:"none",borderRadius:10,fontSize:15,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"background-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#2563EB",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#3B82F6",children:[f.buttonText,(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}),i&&"trial_ended"===e&&(0,a.jsx)("button",{onClick:t,style:{width:"100%",padding:"14px 24px",backgroundColor:"#10B981",color:"#fff",border:"none",borderRadius:10,fontSize:15,fontWeight:500,cursor:"pointer",marginTop:12,transition:"background-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#059669",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#10B981",children:g("subscriptionModal.extendTrial")})]})})})}e.s(["default",()=>g],345453),e.s(["useUser",()=>m],911646),e.s(["SubscriptionExpiredModal",()=>f],80555)}]);